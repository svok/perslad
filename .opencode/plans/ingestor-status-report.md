# üîç –û—Ç—á–µ—Ç –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ Ingestor

**–î–∞—Ç–∞**: Thu Feb 05 2026
**–ü—Ä–æ–µ–∫—Ç**: perslad-1
**–ö–∞—Ç–∞–ª–æ–≥**: `/sda/sokatov/own/perslad-1/ingestor/`
**–í–µ—Ä—Å–∏—è**: Snapshot

---

## üìä –û–ë–©–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### –ê–∫—Ç–∏–≤–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω (–≤–∫–ª—é—á–µ–Ω —Ç–æ–ª—å–∫–æ EnrichStage)

```
Source ‚Üí Processor ‚Üí Enrich ‚Üí Queue1 ‚Üí IndexerSink
```

### –ê–∫—Ç–∏–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

1. **ScannerSourceStage** - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `workspace`
2. **InotifySourceStage** - –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ `workspace`

### –¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- `PROJECT_ROOT=/sda/sokatov/own/perslad-1/workspace` - –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `.env`
- –î–æ—Å—Ç—É–ø–Ω—ã src, config, python-dotenv, aiohttp
- –§–ª–∞–≥ `USE_INOTIFY` –Ω–µ –Ω–∞–π–¥–µ–Ω (–∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω)

---

## ‚úÖ –†–ê–ë–û–¢–ê–Æ–©–ò–ï –ß–ê–°–¢–ò

### 1. EnrichStage - –ò–°–ü–†–ê–í–õ–ï–ù
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- **–§—É–Ω–∫—Ü–∏—è**: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç FileEvent –∏–∑ Queue0, –¥–µ–ª–∞–µ—Ç enrich_name
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—ã–≤–æ–¥–∏—Ç enriched data
- **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ**: –î–∞, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Queue1

### 2. InotifySourceStage - –ò–°–ü–†–ê–í–õ–ï–ù
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- **–§—É–Ω–∫—Ü–∏—è**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ workspace, –æ—Ç–ø—Ä–∞–≤–∫–∞ FileEvent –≤ Queue0
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –∫ —Å–æ–±—ã—Ç–∏—é: `event.pathname` ‚Üí `event.name`
  - –£–±—Ä–∞–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `TIMEOUT` –∏—Å–∫–ª—é—á–µ–Ω–∏—è
  - –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `await indexer.start_watching()` –≤ main.py
- **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ**: –î–∞, —Å–æ–±—ã—Ç–∏—è –ø–æ–ø–∞–¥–∞—é—Ç –≤ Queue0 (—Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ —Ä–∞—Å—Ç–µ—Ç)

---

## üöß –ù–ï–†–ê–ë–û–¢–ê–Æ–©–ò–ï –ß–ê–°–¢–ò

### 1. ProcessorStage - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì
**–§–∞–π–ª**: `app/scanner/stages/processor_stage.py`

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–æ–ø–∞–≥–∏—Ä—É–µ—Ç "poison pill" (None) —á–µ—Ä–µ–∑ –≤–µ—Å—å –ø–∞–π–ø–ª–∞–π–Ω, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫—É —Ä–∞–±–æ—Ç—ã

**–¢–µ–∫—É—â–∏–π –∫–æ–¥** (—Å—Ç—Ä–æ–∫–∏ ~29-38):
```python
if item is None:
    self.input_queue.task_done()
    if wid == 0 and self.output_queue:
        await self.output_queue.put(None)  # ‚Üê –ü–†–û–í–ê–õ
    break  # ‚Üê –ü–†–û–í–ê–õ
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ª–æ–º–∞–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω**:
```
Scanner –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None
     ‚Üì
Queue 0 —Å–æ–¥–µ—Ä–∂–∏—Ç None
     ‚Üì
Processor –ø–æ–ª—É—á–∞–µ—Ç None –∏ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ –¥–∞–ª—å—à–µ
     ‚Üì
Queue 1 –ø–æ–ª—É—á–∞–µ—Ç None
     ‚Üì
Processor –ø–∞–¥–∞–µ—Ç (break) –∏ –±–æ–ª—å—à–µ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
     ‚Üì
Inotify —Å–æ–±—ã—Ç–∏—è –≤–∏—Å—è—Ç –≤ Queue 0 (–∂–¥—É—Ç Processor)
```

**–¢—Ä–µ–±—É–µ–º–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```python
if item is None:
    self.input_queue.task_done()
    self.log.debug(f"Received poison pill from source, continuing...")
    continue  # –ù–µ propagate, –ù–ï break, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫
```

### 2. ScannerSourceStage - –¢–†–ï–ë–£–ï–¢–°–Ø –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï
**–§–∞–π–ª**: `app/scanner/stages/scanner_source_stage.py`

**–ü—Ä–æ–±–ª–µ–º–∞**: –í –º–µ—Ç–æ–¥–µ generate() –¥–æ–±–∞–≤–ª–µ–Ω–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, —á—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç Scanner

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: Scanner –≤–µ—á–Ω–æ –∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–≤–µ—Ä–æ–∫)

**–¢—Ä–µ–±—É–µ–º–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –í–µ—Ä–Ω—É—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ generate()
```python
def generate(self):
    for root, dirs, files in os.walk(self.base_path):
        for file in files:
            path = os.path.join(root, file)
            yield FileEvent(path)
    self.log.info("Scanner scan completed")
```

---

## üéØ –ë–£–î–£–©–ê–Ø –ú–ò–°–°–ò–Ø

### –¶–µ–ª—å: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
1. ‚úÖ Scanner –∏ Inotify –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
2. ‚úÖ Pipeline –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤–µ—á–Ω–æ, –¥–∞–∂–µ –∫–æ–≥–¥–∞ Scanner –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
3. ‚úÖ Inotify —Å–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –≤–µ—Å—å –ø–∞–π–ø–ª–∞–π–Ω
4. ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –æ—á–∏—Å—Ç–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π (all-or-nothing)
5. ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö
6. ‚úÖ –ù–∏–∫–∞–∫–æ–π —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (SourceMerger)

---

## üîß –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (Variant B)

### –®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å ProcessorStage

**–§–∞–π–ª**: `ingestor/app/scanner/stages/processor_stage.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–µ—Ç–æ–¥–µ `_worker_loop`**:
1. –£–±—Ä–∞—Ç—å: `if wid == 0 and self.output_queue: await self.output_queue.put(None)`
2. –£–±—Ä–∞—Ç—å: `break`
3. –û—Å—Ç–∞–≤–∏—Ç—å: `self.input_queue.task_done()`
4. –î–æ–±–∞–≤–∏—Ç—å: `continue`
5. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: `self.log.debug(...)` –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ poison pill

### –®–∞–≥ 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ScannerSourceStage

**–§–∞–π–ª**: `ingestor/app/scanner/stages/scanner_source_stage.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–µ—Ç–æ–¥–µ `generate`**:
1. –í–µ—Ä–Ω—É—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
2. –£–±—Ä–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
3. –ü—Ä–æ—Å—Ç–æ –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç os.walk

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∏**:
1. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª: `echo "test" > /workspace/test.txt`
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
   - Scanner –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è (—Å—Ç–∞–≤–∏—Ç None)
   - Processor –ø–æ–ª—É—á–∞–µ—Ç None –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É
   - Inotify –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –°–æ–±—ã—Ç–∏—è –¥–æ—Ö–æ–¥—è—Ç –¥–æ IndexerSink

---

## üìù –ö–û–ù–¢–†–û–õ–¨–ù–´–ï –¢–û–ß–ö–ò (CHECKLIST)

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [ ] ProcessorStage –Ω–µ –ø—Ä–æ–ø–∞–≥–∏—Ä—É–µ—Ç poison pill
- [ ] ProcessorStage –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è None
- [ ] ScannerSourceStage –Ω–µ –∏–º–µ–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤
- [ ] Scanner –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ø–∞–π–ø–ª–∞–π–Ω–∞
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] Scanner –Ω–∞—Ö–æ–¥–∏—Ç —Ñ–∞–π–ª—ã –≤ workspace
- [ ] Inotify –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –°–æ–±—ã—Ç–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ Processor
- [ ] Enrich –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è
- [ ] IndexerSink –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ Pipeline —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ—á–Ω–æ
- ‚úÖ Inotify —Å–æ–±—ã—Ç–∏—è –¥–æ—Ö–æ–¥—è—Ç –¥–æ IndexerSink
- ‚úÖ Queue0 —Ä–∞—Å—Ç–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç
- ‚úÖ Queue0 –Ω–µ —Ä–∞—Å—Ç–µ—Ç –∫–æ–≥–¥–∞ Processor –∑–∞–≤–µ—Ä—à–∏–ª—Å—è
- ‚úÖ Pipeline –Ω–µ –ø–∞–¥–∞–µ—Ç

---

## ‚ùå –û–¢–ö–ê–ó–ê–ù–ù–´–ï –†–ï–®–ï–ù–ò–Ø

### 1. –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –≤ Scanner
**–ü—Ä–∏—á–∏–Ω–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∑–≤–∞–ª —ç—Ç–æ "—Å–∫–æ—Ç–∏–Ω–∞"
**–†–µ—à–µ–Ω–∏–µ**: –û—Å—Ç–∞–≤–∏—Ç—å Scanner –ø—Ä–æ—Å—Ç—ã–º, –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ Processor –æ–±—Ä–∞–±–æ—Ç–∫—É None

### 2. SourceMerger
**–ü—Ä–∏—á–∏–Ω–∞**: –°–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ (Variant B)

### 3. –û—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É "all-or-nothing"
**–†–µ—à–µ–Ω–∏–µ**: –ù–∏–∫–∞–∫–∏—Ö –æ—á–∏—Å—Ç–æ–∫, –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

---

## üö´ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

1. **NO queue cleaning** - –ù–∏–∫–∞–∫–∏—Ö –æ—á–∏—Å—Ç–æ–∫ –æ—á–µ—Ä–µ–¥–µ–π –¥–µ–ª–∞—Ç—å –Ω–µ–ª—å–∑—è
2. **NO infinite loops** - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ
3. **NO SourceMerger complexity** - –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
4. **Pipeline must run forever** - –ü–∞–π–ø–ª–∞–π–Ω –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤–µ—á–Ω–æ, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã

---

## üìç –ö–õ–Æ–ß–ï–í–´–ï –§–ê–ô–õ–´

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏—è |
|------|--------|----------|
| `ingestor/.env` | ‚úÖ OK | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω PROJECT_ROOT |
| `ingestor/app/scanner/main.py` | ‚úÖ OK | start_watching –¥–æ–±–∞–≤–ª–µ–Ω |
| `ingestor/app/scanner/stages/enrich_stage.py` | ‚úÖ OK | –†–∞–±–æ—Ç–∞–µ—Ç |
| `ingestor/app/scanner/stages/inotify_source_stage.py` | ‚úÖ OK | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω event.pathname |
| `ingestor/app/scanner/stages/processor_stage.py` | üöß | **–ù—É–∂–µ–Ω fix** |
| `ingestor/app/scanner/stages/scanner_source_stage.py` | üöß | **–ù—É–∂–µ–Ω restore** |

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
1. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `processor_stage.py` - –∏–∑–º–µ–Ω–∏—Ç—å `_worker_loop`
2. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `scanner_source_stage.py` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `generate()`

### –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
4. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –≤ workspace
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
6. –°–æ–æ–±—â–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
7. –ü–æ–ª—É—á–∏—Ç—å –æ–¥–æ–±—Ä–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –¥—Ä—É–≥–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

---

**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é ProcessorStage
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π (–±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø–∞–π–ø–ª–∞–π–Ω)
**–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ**: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è processor_stage.py